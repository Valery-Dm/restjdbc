## Пользовательский Restful веб-сервис
Используемые технологии: Spring Boot (on Tomcat), Spring Security, Spring REST, 
JDBC, MySQL (версия 5.7), Java (версия 1.8)

[Доступен онлайн](http://restjdbc-va1ery.rhcloud.com/swagger-ui.html) 
на OpenShift сервере. Онлайн версия работает через http (для https нужен премиум аккаунт).

Смотрите видео примеры того:

[Как зайти администратором](https://youtu.be/hfpowdVp9PU) и проверить точку вызова данных о роли.

[Как зайти обычным пользователем.](https://youtu.be/gw7YLq3aGcU) Операции недоступны.

[Как создать нового пользователя](https://youtu.be/D1isfiq7eXI) (от имени администратора).

Инструкции по установке локальной копии даны ниже.

### Описание задания:
Спроектировать REST веб-сервис на Spring, выполняющий следующие операции:
- Добавление пользователя
- Получение данных пользователя
- Редактирование пользователя
- Удаление пользователя
- Получение списка пользователей с определенной ролью

Все перечисленные выше операции выполняются только от имени пользователя с ролью Администратор

В сервисе должен быть список предустановленных по-умолчанию ролей: 
- Администратор 
- Разработчик 
- Пользователь

Данные пользователя:
- Адрес электронной почты (уникальный идентификатор пользователя, обязательно) 
- пароль (если не передан в запросе, то генерится автоматически)
- имя (обязательно)
- фамилия (обязательно) 
- отчество (если присутствует)
- роль или роли (если присутствуют)

БД требуется спроектировать без использования ORM

### Как установить локальную копию:
Для начала приготовьте локальную базу MySQL (доступную по адресу http://localhost:3306).

Необходимо вручную создать пользователя в Базе Данных, от имени которого будет
подключаться данное приложение.

Запустите
[этот скрипт](src/main/resources/sql/db_user_create.sql)
из программы MySQL Workbench

ИЛИ введите следующую последовательность комманд в Терминале 
(скопируйте после знака >):

```
~> mysql -u root -p

Enter password: введите пароль пользователя root

mysql> CREATE USER 'restjdbc'@'localhost' IDENTIFIED BY 'aA123456'; GRANT ALL ON users_demo.* TO 'restjdbc'@'localhost'; FLUSH PRIVILEGES; exit;
```

Существующая схема `users_demo` будет сброшена и воссоздана заново со всеми
таблицами и демонстрационными записями во время запуска приложения 
(это часть демонстрации).

Скачайте jar file (последней версии) из корневой директории.
И запустите его из коммандной строки 

`~> java -jar restjdbc-{версия}.jar` 

Затем откройте интернет браузер.
Документация Swagger для REST API доступна по адресам:

Swagger UI
> https://localhost:8443/swagger-ui.html

Swagger REST
> https://localhost:8443/v2/api-docs

При первом запуске появится предупреждение, что сайт использует непроверенный сертификат.
Это абсолютно нормально, поскольку сертификат пользовательский. Разрешите открыть сайт.

Для остановки сервера нажмите Ctrl+C в окне терминала, или просто закройте терминал.

#### Используется Авторизация HTTP Basic:

Каждая операция должна выполняться от имени пользователя с правами `Администратор`.

Для Swagger UI будет открыто стандартное для браузера окно ввода пароля.
Для Postman (Chrome плагин) - на вкладке 'Authorization', выберите 'Basic Auth'
в поле 'Type' и введите следующее:

Username:
> demo.admin@spring.demo

Password:
> 123456

#### Примечание:
Сервис спроектирован для работы со специальными REST-клиентами (как например,
Postman). В случае когда используется браузер, могут возникнуть проблемы
с Базовой Авторизацией. Браузеры излишне услужливы при запоминании данных
пользователя для авторизации, поэтому может потребоваться перезагрузка браузера,
чтобы перелогиниться другим пользователем (и даже этого может оказаться
недостаточно, потому что некоторые браузеры могут запускать background процессы,
препятствующие полной перезагрузке). 

Рекомендуется использовать режим браузера Инкогнито для работы с сервисом.

Бесперебойная работа сервиса, работающего на OpenShift, не гарантируется.

Поскольку методы, позволяющие менять записи в базе, свободно доступны через точки REST,
приняты некоторые защитные меры:

Невозможно удалить или изменить пользователя с правами администратора с ID 3.

Также сервер будет перезапускаться раз в сутки, сбрасывая все изменения записей
в базе данных к их начальному состоянию.